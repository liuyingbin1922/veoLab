(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4391:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=t(603),l=t(3044),r=t(3958),n=t.n(r),o=t(2337),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2640)),"/Users/yingbin/Documents/codes/aiPro/veoLab/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,6523)),"/Users/yingbin/Documents/codes/aiPro/veoLab/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9890,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/yingbin/Documents/codes/aiPro/veoLab/app/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1311:()=>{},9559:()=>{},6892:(e,s,t)=>{Promise.resolve().then(t.bind(t,2640))},3740:(e,s,t)=>{Promise.resolve().then(t.bind(t,6308))},4496:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3088,23)),Promise.resolve().then(t.t.bind(t,6502,23)),Promise.resolve().then(t.t.bind(t,3958,23)),Promise.resolve().then(t.t.bind(t,2229,23)),Promise.resolve().then(t.t.bind(t,96,23)),Promise.resolve().then(t.t.bind(t,4663,23)),Promise.resolve().then(t.t.bind(t,636,23))},4224:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,9828,23)),Promise.resolve().then(t.t.bind(t,9322,23)),Promise.resolve().then(t.t.bind(t,6986,23)),Promise.resolve().then(t.t.bind(t,8313,23)),Promise.resolve().then(t.t.bind(t,660,23)),Promise.resolve().then(t.t.bind(t,6427,23)),Promise.resolve().then(t.t.bind(t,2344,23))},6308:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(4781),l=t(9128);let r={topic:"3 个让你效率翻倍的 AI 小技巧",platform:"douyin",duration:30,template:"pain_point_hook",persona:"natural",must_include:"",avoid:""};function n(){let[e,s]=(0,l.useState)(r),[t,n]=(0,l.useState)(!1),[m,p]=(0,l.useState)(null),[h,u]=(0,l.useState)(null),[b,v]=(0,l.useState)(""),g=e=>t=>{s(s=>({...s,[e]:t}))},j=async()=>{n(!0),u(null);try{let s=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})}),t=await s.json();if(!s.ok||!t.ok)throw Error(t.error||"生成失败，请稍后重试");p(t.data),v(t.data.voiceover)}catch(e){u(e instanceof Error?e.message:"生成失败")}finally{n(!1)}},f=e=>navigator.clipboard.writeText(e),N=(0,l.useMemo)(()=>m?function(e){let s=`# 分镜视频工厂输出

- 平台：${e.platform}
- 时长：${e.duration_sec}s
- 模板：${e.template}
`,t=`
## 爆款标题
${e.titles.map((e,s)=>`${s+1}. ${e}`).join("\n")}`,a=`
## 旁白

${e.voiceover}`,l=e.shots.map(e=>`| ${e.shot} | ${e.sec}s | ${x(e.visual)} | ${x(e.camera)} | ${x(e.subtitle)} | ${x(e.bgm_sfx)} | ${x(e.veo_prompt)} | ${x(e.negative_prompt)} |`).join("\n"),r=e.shots.map(e=>`### 镜头 ${e.shot}

**Veo Prompt**: ${e.veo_prompt}

**Negative**: ${e.negative_prompt}`).join("\n\n");return`${s}${t}${a}

## 分镜表
| 镜头 | 秒数 | 画面 | 镜头语言 | 字幕 | BGM/SFX | Veo Prompt | Negative |
| --- | --- | --- | --- | --- | --- | --- | --- |
${l}

## Veo Prompts
${r}`}({...m,voiceover:b}):"",[m,b]),y=(0,l.useMemo)(()=>m?function(e){let s=e.map(e=>[e.shot,e.sec,e.visual,e.camera,e.subtitle,e.bgm_sfx,e.veo_prompt,e.negative_prompt].map(e=>`"${String(e).replace(/"/g,'""')}"`).join(",")).join("\n");return`shot,sec,visual,camera,subtitle,bgm_sfx,veo_prompt,negative_prompt
${s}`}(m.shots):"",[m]);return(0,a.jsxs)("main",{className:"grid gap-6 lg:grid-cols-[1.1fr,1.3fr]",children:[(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/50 p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"输入参数"}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"Gemini 文案 ➜ Gemini 分镜"})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-4 text-sm",children:[(0,a.jsx)(o,{label:"选题",value:e.topic,onChange:g("topic"),placeholder:"例如：3 个让你效率翻倍的 AI 小技巧",required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(i,{label:"平台",value:e.platform,onChange:g("platform"),options:[{value:"douyin",label:"抖音"},{value:"shipinhao",label:"视频号"},{value:"xiaohongshu",label:"小红书"}]}),(0,a.jsx)(i,{label:"时长",value:String(e.duration),onChange:e=>g("duration")(Number(e)),options:[{value:"15",label:"15 秒"},{value:"30",label:"30 秒"},{value:"60",label:"60 秒"}]})]}),(0,a.jsx)(i,{label:"模板",value:e.template,onChange:g("template"),options:[{value:"pain_point_hook",label:"痛点开场"},{value:"product_reco",label:"产品推荐"},{value:"story_emotion",label:"故事情感"}]}),(0,a.jsx)(i,{label:"人设",value:e.persona??"natural",onChange:g("persona"),options:[{value:"natural",label:"自然"},{value:"professional",label:"专业"},{value:"funny",label:"搞笑"},{value:"warm",label:"温暖"}]}),(0,a.jsx)(o,{label:"必须出现",value:e.must_include,onChange:g("must_include"),placeholder:"可留空"}),(0,a.jsx)(o,{label:"禁忌",value:e.avoid,onChange:g("avoid"),placeholder:"可留空"}),(0,a.jsx)("button",{onClick:j,disabled:t,className:"mt-2 w-full rounded-xl bg-indigo-500 px-4 py-3 text-center text-base font-semibold text-white shadow-lg transition hover:bg-indigo-400",children:t?"生成中...":"生成分镜"}),h&&(0,a.jsx)("p",{className:"text-sm text-rose-400",children:h})]})]}),(0,a.jsx)("section",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"结果"}),(0,a.jsxs)("div",{className:"flex gap-2 text-xs text-slate-400",children:[(0,a.jsx)(d,{children:"Markdown"}),(0,a.jsx)(d,{children:"CSV"})]})]}),!m&&(0,a.jsx)("p",{className:"mt-6 text-sm text-slate-400",children:"提交参数后将在这里看到标题、旁白、分镜表和 Veo prompts。"}),m&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"爆款标题 (10)"}),(0,a.jsx)("button",{className:"text-sm text-indigo-300 hover:text-indigo-200",onClick:()=>f(m.titles.join("\n")),children:"复制全部"})]}),(0,a.jsx)("ul",{className:"grid gap-2 md:grid-cols-2",children:m.titles.map((e,s)=>(0,a.jsxs)("li",{className:"rounded-lg border border-slate-800 bg-slate-900 px-3 py-2 text-sm text-slate-100",children:[s+1,". ",e]},s))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"旁白脚本"}),(0,a.jsx)("div",{className:"flex gap-2 text-sm",children:(0,a.jsx)("button",{className:"text-indigo-300 hover:text-indigo-200",onClick:()=>f(b),children:"复制"})})]}),(0,a.jsx)("textarea",{className:"h-32 w-full rounded-lg border border-slate-800 bg-slate-950/50 p-3 text-sm text-slate-100",value:b,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"分镜表"}),(0,a.jsx)("button",{className:"text-sm text-indigo-300 hover:text-indigo-200",onClick:()=>f(y),children:"复制 CSV"})]}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-800",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-sm text-slate-200",children:[(0,a.jsx)("thead",{className:"bg-slate-900 uppercase text-xs text-slate-400",children:(0,a.jsx)("tr",{children:["镜头","秒数","画面","镜头语言","字幕","BGM/SFX","Veo prompt","Negative"].map(e=>(0,a.jsx)("th",{className:"px-3 py-2",children:e},e))})}),(0,a.jsx)("tbody",{children:m.shots.map(e=>(0,a.jsxs)("tr",{className:"border-b border-slate-800 bg-slate-950/40",children:[(0,a.jsx)("td",{className:"px-3 py-2",children:e.shot}),(0,a.jsxs)("td",{className:"px-3 py-2",children:[e.sec,"s"]}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.visual}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.camera}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.subtitle}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.bgm_sfx}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.veo_prompt}),(0,a.jsx)("td",{className:"px-3 py-2 max-w-xs whitespace-pre-line",children:e.negative_prompt})]},e.shot))})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Veo Prompts"}),(0,a.jsx)("button",{className:"text-sm text-indigo-300 hover:text-indigo-200",onClick:()=>f(N),children:"复制 Markdown"})]}),(0,a.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:m.shots.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-3 shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[(0,a.jsxs)("span",{children:["镜头 ",e.shot]}),(0,a.jsx)("button",{className:"text-indigo-300 hover:text-indigo-200",onClick:()=>f(e.veo_prompt),children:"复制"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-100 whitespace-pre-line",children:e.veo_prompt}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-rose-300",children:["Negative: ",e.negative_prompt]})]},e.shot))})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[(0,a.jsx)("button",{onClick:()=>c("storyboard.md",N),className:"rounded-lg border border-indigo-500/60 bg-indigo-500/10 px-3 py-2 text-indigo-100 hover:bg-indigo-500/20",children:"导出 Markdown"}),(0,a.jsx)("button",{onClick:()=>c("storyboard.csv",y),className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-emerald-100 hover:bg-emerald-500/20",children:"导出 CSV"}),m&&m.shots?.length>0&&(0,a.jsxs)("span",{className:"rounded-lg border border-slate-800 px-3 py-2 text-xs text-slate-400",children:["时长 ",m.duration_sec,"s \xb7 ",m.shots.length," 镜头 ",m.shots.reduce((e,s)=>e+s.sec,0),"s"]})]})]})]})})]})}function o({label:e,value:s,onChange:t,placeholder:l,required:r}){return(0,a.jsxs)("label",{className:"block space-y-2 text-sm text-slate-200",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[e,r&&(0,a.jsx)("span",{className:"text-rose-300",children:"*"})]}),(0,a.jsx)("input",{value:s,onChange:e=>t(e.target.value),placeholder:l,required:r,className:"w-full rounded-lg border border-slate-800 bg-slate-950/50 px-3 py-2 text-slate-100 outline-none focus:border-indigo-500"})]})}function i({label:e,value:s,options:t,onChange:l}){return(0,a.jsxs)("label",{className:"block space-y-2 text-sm text-slate-200",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("select",{value:s,onChange:e=>l(e.target.value),className:"w-full rounded-lg border border-slate-800 bg-slate-950/50 px-3 py-2 text-slate-100",children:t.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})}function d({children:e}){return(0,a.jsx)("span",{className:"rounded-full border border-slate-800 bg-slate-900 px-3 py-1 text-xs text-slate-300",children:e})}function c(e,s){let t=new Blob([s],{type:e.endsWith(".csv")?"text/csv":"text/markdown"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=e,l.click(),URL.revokeObjectURL(a)}function x(e){return e.replace(/\|/g,"\\|").replace(/\n/g,"<br />")}},6523:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r,metadata:()=>l});var a=t(1761);t(2531);let l={title:"分镜视频工厂",description:"ToC 运营分镜生成工具"};function r({children:e}){return(0,a.jsx)("html",{lang:"zh-CN",children:(0,a.jsx)("body",{className:"min-h-screen bg-slate-950 text-slate-100",children:(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[(0,a.jsx)("header",{className:"mb-8 flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-widest text-indigo-300",children:"Veo Lab"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"分镜视频工厂"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Gemini 双阶段串联，产出爆款分镜与 Veo prompts"})]})}),e]})})})}},2640:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(5015).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yingbin/Documents/codes/aiPro/veoLab/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yingbin/Documents/codes/aiPro/veoLab/app/page.tsx","default")},2531:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[957,661],()=>t(4391));module.exports=a})();